<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L·ªãch C√¥ng Gi√°o</title>
    <link rel="manifest" href="/CalendarGxChilang/manifest1.json">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
      <meta name="theme-color" content="#2196f3">
      <link rel="stylesheet" href="style.css">
      

  
    </style>

    <!-- T√≠ch h·ª£p c√°c t·ªáp JS -->
    <script src="js/saintcelebration.js"></script>
    <script src="js/calculateLunarSolar.js"></script>
    <script src="js/calculateChasuble.js"></script>
    <script src="js/calculateFeasts.js"></script>
    <script src="js/calculateBasic.js"></script>
    <script src="js/calculatenumberSunday.js"></script>
    <script src="js/calculatenumberSecondary.js"></script>
    <script src="js/calculateReading.js"></script>
    <script src="Reading/Sunday.js"></script>
    <script src="js/calculatebibleReads.js"></script>
    <script src="Reading/DailySeason.js"></script>
    <script src="Reading/DailyOrdinary1.js"></script>
    <script src="Reading/DailyOrdinary2.js"></script>
    <script src="Reading/SaintsBible.js"></script>
    <script src="Reading/Optionsaint.js"></script>
    <script src="Reading/eucharisticAdoration.js"></script>
    <script src="js/secondfeast.js"></script>
    <script src="js/calculateOptionbibleReads.js"></script>
    <script src="js/calculateEucharisticAdoration.js"></script>
    <script src="js/Optionfeast.js"></script>
    <script src="js/calculateWeeks.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>

<!-- Ph·∫ßn Header -->
<header class="calendar-header">
    L·ªäCH PH·ª§NG V·ª§ C√îNG GI√ÅO
</header>

<div class="modal reading-modal" id="readingModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>B√†i ƒê·ªçc Ng√†y L·ªÖ</h3>
            <span class="close" onclick="quitModal('readingModal')">&times;</span>
        </div>
        <div class="vertical-buttons">
            <button class="icon-button" onclick="increaseFontSize()">+</button>
            <button class="icon-button" onclick="decreaseFontSize()">-</button>
            <button class="icon-button" onclick="boldText()">B</button>
            <button class="icon-button" onclick="quitModal('readingModal')">ƒê√≥ng</button>
        </div>
        <div id="readingContent">
            <div id="reading01" class="reading-section"></div>
            <div id="psalm01" class="reading-section"></div>
            <div id="reading02" class="reading-section"></div>
            <div id="alleluia01" class="reading-section"></div>
            <div id="gospel01" class="reading-section"></div>
        </div>
    </div>
</div>



<!-- Overlay -->
<div id="modalOverlay" class="overlay" onclick="closeModal()"></div>

<!-- N·ªôi dung ch√≠nh -->
<div class="calendar-content">
    <div class="image-container">
        <img src="01.webp" alt="Maria v√† Ch√∫a Gi√™su">
        <div class="note">
            <p style="color: red; font-weight: bold;">
               B√†i ƒë·ªçc: UBPV/HƒêGMVN(1973)
            </p>
            </div>
    </div>

    <!-- Th√¥ng tin l·ªÖ v√† b√†i ƒë·ªçc -->
    <div class="details" id="detailsSection">
        <!-- T√™n ng√†y l·ªÖ -->
        <div class="feast-info-container">
            <p class="feast-info" id="feast-info"></p>
        </div>

        <!-- B√†i ƒë·ªçc ch√≠nh -->
        <p class="readings">
            <span id="reading1"></span> <span id="psalm"></span>
            <span id="reading2"></span> <span id="gospel"></span>
        </p>

        <p class="info"><span id="info"></span></p>

        <!-- T√™n l·ªÖ v·ªçng n·∫øu c√≥ -->
        <div>
            <p id="second-feast-info"></p>
        </div>

        <!-- B√†i ƒë·ªçc ph·ª• -->
        <div>
            <p id="optional-reading"></p>

            <div class="reading-row">
                <div class="weekday" id="weekday">TH·ª® HAI</div>
                <p class="date-large" id="current-date">1</p>
                <div class="lunar-date" id="lunarDate">AL: 1/2</div>
            </div>

            <p class="date-small" id="current-month-year"></p>
        </div>
  

<!-- Footer cho ƒëi·ªán tho·∫°i -->
<footer id="mobile-footer" class="mobile-footer">
    <div class="controls-container">
        <div class="mobile-controls">
           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<button class="icon-button" onclick="toggleDatePicker()">üìÖ</button>&nbsp;
            <button onclick="displayWeekInfo('previous')">‚èÆ</button>
            <button onclick="displayWeekInfo('current')">üß≠</button>
            <button onclick="displayWeekInfo('next')">‚è≠</button>&nbsp;&nbsp;&nbsp;
            <button class="icon-button" onclick="toggleMonthPicker()">üóì</button>
            &nbsp;&nbsp;&nbsp;&nbsp;
            <!-- N√∫t ƒë·ªÉ m·ªü modal hi·ªÉn th·ªã trang web -->
            <button class="icon-button" data-bs-toggle="modal" data-bs-target="#webModal"> ‚úùÔ∏è</button>
        </div>
    </div>
</footer>
<!-- Modal ƒë·ªÉ nh√∫ng trang web -->
<!-- Modal ƒë·ªÉ nh√∫ng trang web -->
<div class="modal fade" id="webModal" tabindex="-1" aria-labelledby="webModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <iframe id="embedded-page" src="https://ktcgkpv.org/readings/prayer" frameborder="0" allowfullscreen></iframe>
        </div>
      </div>
    </div>
  </div>
    <!-- C√°c tr∆∞·ªùng ch·ªçn ng√†y, th√°ng, nƒÉm cho thi·∫øt b·ªã l·ªõn -->
    <div class="desktop-controls">

        <button>Ng√†y : </button>
        <input type="date" id="inputDate" onchange="getFeastForSelectedDate()">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        
        <!-- Ch·ªçn tu·∫ßn hi·ªán t·∫°i, tu·∫ßn tr∆∞·ªõc, ho·∫∑c tu·∫ßn t·ªõi -->
        <button onclick="displayWeekInfo('previous')">‚èÆ</button>
        <button onclick="displayWeekInfo('current')">Tu·∫ßn Hi·ªán T·∫°i</button>
        <button onclick="displayWeekInfo('next')">‚è≠</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      

        <button onclick="displayMonthInfo()">L·ªãch Th√°ng : </button>
        <select id="monthInput">
            <option value="1">Th√°ng 1</option>
            <option value="2">Th√°ng 2</option>
            <option value="3">Th√°ng 3</option>
            <option value="4">Th√°ng 4</option>
            <option value="5">Th√°ng 5</option>
            <option value="6">Th√°ng 6</option>
            <option value="7">Th√°ng 7</option>
            <option value="8">Th√°ng 8</option>
            <option value="9">Th√°ng 9</option>
            <option value="10">Th√°ng 10</option>
            <option value="11">Th√°ng 11</option>
            <option value="12">Th√°ng 12</option>
        </select>
        <input type="number" id="yearInput" value="2024" min="1900" max="2100">
       </div>
</div>

<!-- Modal ch·ªçn ng√†y -->
<div id="datePickerModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeDatePicker()">&times;</span>
        <h3>Ch·ªçn ng√†y</h3>
        <!-- G·ªçi h√†m displayDateInfo khi ng∆∞·ªùi d√πng ch·ªçn ng√†y -->
        <input type="date" id="mobileInputDate" onchange="displayDateInfo(this.value)">
        <!-- N√∫t ƒë√≥ng modal n·∫øu c·∫ßn -->
        <button onclick="quitModal()">Close</button>
    </div>
</div>

<!-- Modal ch·ªçn tu·∫ßn mobi-->
<div id="weekPickerModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeWeekPicker()">&times;</span>
        <h3>Ch·ªçn tu·∫ßn</h3>
        <!-- Hi·ªÉn th·ªã th√¥ng tin tu·∫ßn -->
        <button onclick="displayWeekInfo('previous')">‚èÆ</button>
        <button onclick="displayWeekInfo('current')">Tu·∫ßn Hi·ªán T·∫°i</button>
        <button onclick="displayWeekInfo('next')">‚è≠</button>
        <button onclick="quitModal()">Close</button> <!-- ƒê√≥ng modal -->
    </div>
</div>

<!-- Modal ch·ªçn Th√°ng mobi -->
<div id="monthPickerModal" class="modal" style="display:none;">
    <div class="modal-content">
        <h3>Ch·ªçn th√°ng v√† nƒÉm</h3>
        <select id="mobileMonthInput">
            <option value="1">Th√°ng 1</option>
            <option value="2">Th√°ng 2</option>
            <option value="3">Th√°ng 3</option>
            <option value="4">Th√°ng 4</option>
            <option value="5">Th√°ng 5</option>
            <option value="6">Th√°ng 6</option>
            <option value="7">Th√°ng 7</option>
            <option value="8">Th√°ng 8</option>
            <option value="9">Th√°ng 9</option>
            <option value="10">Th√°ng 10</option>
            <option value="11">Th√°ng 11</option>
            <option value="12">Th√°ng 12</option>
        </select>
        <input type="number" id="mobileYearInput" value="2024" min="1900" max="2100">
        <button onclick="displayMonthInfoMobile()">X√°c nh·∫≠n</button>
        <button onclick="quitModal()">ƒê√≥ng</button>
    </div>
</div>

    <!-- B·∫£ng hi·ªÉn th·ªã th√¥ng tin -->
    <h2>L·ªãch Ph·ª•ng V·ª• <span id="yearDisplay"></span></h2>
    <table>
        <thead>
            <tr>
                <th>Ng√†y</th>
                <th>√Åo</th>
                <th>Th√¥ng tin Ng√†y L·ªÖ v√† B√†i ƒê·ªçc</th>
            </tr>
        </thead>
        <tbody id="reportTableBody">
            <!-- N·ªôi dung s·∫Ω ƒë∆∞·ª£c ch√®n ƒë·ªông v√†o ƒë√¢y -->
        </tbody>
    </table>
</div>

</body>
</html>

<script>
      function removeHeader() {
    try {
      // Ch·ªâ th·ª±c hi·ªán n·∫øu trang iframe c√πng mi·ªÅn
      const iframe = document.getElementById('custom-embedded-page');
      const iframeDocument = iframe.contentWindow.document;
      const header = iframeDocument.querySelector('header');

      if (header) {
        header.style.display = 'none'; // ·∫®n ph·∫ßn header
      }
    } catch (e) {
      console.error('Kh√¥ng th·ªÉ truy c·∫≠p n·ªôi dung iframe do kh√°c mi·ªÅn (Cross-Origin)');
    }
  }
    let lastScrollY = window.scrollY;
    const footer = document.getElementById('mobile-footer');

    window.addEventListener('scroll', () => {
        if (window.scrollY > lastScrollY && window.scrollY > 50) {
            // N·∫øu cu·ªôn xu·ªëng v√† cu·ªôn qu√° 50px, ·∫©n footer
            footer.classList.add('hidden');
        } else if (window.scrollY < lastScrollY) {
            // N·∫øu cu·ªôn l√™n, hi·ªán footer
            footer.classList.remove('hidden');
        }
        lastScrollY = window.scrollY; // C·∫≠p nh·∫≠t v·ªã tr√≠ cu·ªôn
    });

    if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('./service-worker.js')
      .then(reg => console.log('Service Worker registered!', reg))
      .catch(err => console.log('Service Worker registration failed:', err));
  });
}

function openModal(modalId) {
    const modal = document.getElementById(modalId);
    const overlay = document.querySelector(".overlay");
    if (modal && overlay) {
        modal.classList.add("show");
        overlay.classList.add("show");
    }
}

function quitModal(modalId) {
    const modal = document.getElementById(modalId);
    const overlay = document.querySelector(".overlay");
    if (modal && overlay) {
        modal.classList.remove("show");
        overlay.classList.remove("show");
    }
}

function increaseFontSize() {
    const content = document.getElementById("readingContent");
    let currentSize = parseFloat(window.getComputedStyle(content).fontSize);
    content.style.fontSize = (currentSize + 2) + "px";
}

function decreaseFontSize() {
    const content = document.getElementById("readingContent");
    let currentSize = parseFloat(window.getComputedStyle(content).fontSize);
    if (currentSize > 10) {
        content.style.fontSize = (currentSize - 2) + "px";
    }
}

function boldText() {
    const content = document.getElementById("readingContent");
    if (content.style.fontWeight === "bold") {
        content.style.fontWeight = "normal";
    } else {
        content.style.fontWeight = "bold";
    }
}

    const appBar = document.getElementById('appBar');


// H√†m m·ªü/ƒë√≥ng modal ch·ªçn ng√†y
function toggleDatePicker() {
    var modal = document.getElementById('datePickerModal');
    var displayStatus = modal.style.display === 'block' ? 'none' : 'block';
    modal.style.display = displayStatus;
    toggleOverlay(displayStatus); // ƒêi·ªÅu khi·ªÉn overlay
}

// H√†m m·ªü/ƒë√≥ng modal ch·ªçn tu·∫ßn
function toggleWeekPicker() {
    var modal = document.getElementById('weekPickerModal');
    var displayStatus = modal.style.display === 'block' ? 'none' : 'block';
    modal.style.display = displayStatus;
    toggleOverlay(displayStatus); // ƒêi·ªÅu khi·ªÉn overlay
}

// H√†m m·ªü/ƒë√≥ng modal ch·ªçn th√°ng/nƒÉm (c√≥ th·ªÉ th√™m modal cho th√°ng/nƒÉm n·∫øu c·∫ßn)
function toggleMonthPicker() {
    var modal = document.getElementById('monthPickerModal');
    if (modal) {
        var displayStatus = modal.style.display === 'block' ? 'none' : 'block';
        modal.style.display = displayStatus;
        toggleOverlay(displayStatus); // ƒêi·ªÅu khi·ªÉn overlay
    }
}

// H√†m ·∫©n overlay v√† c√°c modal
function quitModal() {
    var modals = document.querySelectorAll('.modal');
    modals.forEach(function(modal) {
        modal.style.display = 'none';
    });
    toggleOverlay('none'); // ·∫®n overlay khi ƒë√≥ng t·∫•t c·∫£ modal
}

// H√†m m·ªü/ƒë√≥ng overlay
function toggleOverlay(displayStatus) {
    var overlay = document.getElementById('modalOverlay');
    if (overlay) {
        overlay.style.display = displayStatus;
    }
}

// C√°c h√†m ƒë√≥ng t·ª´ng modal
function closeDatePicker() {
    document.getElementById('datePickerModal').style.display = 'none';
    toggleOverlay('none'); // ·∫®n overlay
}


function getWeekday(date) {
        const days = ["CH√öA NH·∫¨T", "TH·ª® HAI", "TH·ª® BA", "TH·ª® T∆Ø", "TH·ª® NƒÇM", "TH·ª® S√ÅU", "TH·ª® B·∫¢Y"];
        return days[date.getDay()];
    }

    function getMonthName(date) {
        const months = [
            "TH√ÅNG M·ªòT", "TH√ÅNG HAI", "TH√ÅNG BA", "TH√ÅNG T∆Ø", "TH√ÅNG NƒÇM", "TH√ÅNG S√ÅU",
            "TH√ÅNG B·∫¢Y", "TH√ÅNG T√ÅM", "TH√ÅNG CH√çN", "TH√ÅNG M∆Ø·ªúI", "TH√ÅNG M∆Ø·ªúI M·ªòT", "TH√ÅNG M∆Ø·ªúI HAI"
        ];
        return months[date.getMonth()];
}
function displayDateInfo(date) {
    // Kh·ªüi t·∫°o ng√†y ƒë√£ ch·ªçn ho·∫∑c ng√†y hi·ªán t·∫°i
    const selectedDate = date ? new Date(date) : new Date();
    if (isNaN(selectedDate.getTime())) {
        console.error("Invalid date format:", date);
        return; // Tho√°t kh·ªèi h√†m n·∫øu ng√†y kh√¥ng h·ª£p l·ªá
    }

    const year = selectedDate.getFullYear();
    const month = selectedDate.getMonth() + 1;
    const day = selectedDate.getDate();

    // S·ª≠ d·ª•ng c√°c h√†m getWeekday v√† getMonthName ƒë·ªÉ l·∫•y th·ª© v√† th√°ng
    let weekday, monthName;
    try {
        weekday = getWeekday(selectedDate);  // L·∫•y th·ª© trong tu·∫ßn
        monthName = getMonthName(selectedDate);  // L·∫•y t√™n th√°ng
    } catch (error) {
        console.error("Error in getWeekday or getMonthName:", error);
        return;
    }

    // L·∫•y ng√†y Ch√∫a Nh·∫≠t ƒë·∫ßu ti√™n c·ªßa M√πa V·ªçng
    let firstSundayOfAdvent;
    try {
        firstSundayOfAdvent = getFirstSundayOfAdvent(year);
    } catch (error) {
        console.error("Error in getFirstSundayOfAdvent:", error);
        return;
    }

    // Ki·ªÉm tra xem ng√†y hi·ªán t·∫°i c√≥ sau Ch√∫a Nh·∫≠t ƒë·∫ßu ti√™n c·ªßa M√πa V·ªçng kh√¥ng
    let liturgicalYear = getLiturgicalYear(year);
    if (selectedDate >= firstSundayOfAdvent) {
        try {
            liturgicalYear = getLiturgicalYear(year + 1);
        } catch (error) {
            console.error("Error in getLiturgicalYear:", error);
        }
    }

    // Hi·ªÉn th·ªã th·ª© trong tu·∫ßn, ng√†y v√† th√°ng/nƒÉm ph·ª•ng v·ª•
    const weekdayElement = document.getElementById("weekday");
    const currentDateElement = document.getElementById("current-date");
    const currentMonthYearElement = document.getElementById("current-month-year");
    if (weekdayElement && currentDateElement && currentMonthYearElement) {
        weekdayElement.textContent = weekday; 
        currentDateElement.textContent = day; 
        currentMonthYearElement.textContent = `${monthName} - ${year} NƒÇM ${liturgicalYear}`;
    } else {
        console.error("One or more elements not found (weekday, current-date, current-month-year).");
        return;
    }

    // Chuy·ªÉn ƒë·ªïi ng√†y √¢m l·ªãch
    let lunarDate;
    try {
        lunarDate = convertToLunarDate({ day, month, year });
        if (!lunarDate || !lunarDate.day || !lunarDate.month) {
            console.error("Invalid lunar date conversion");
            return;
        }
    } catch (error) {
        console.error("Error in convertToLunarDate:", error);
        return;
    }

    // L·∫•y can chi cho nƒÉm √¢m l·ªãch
    let canChi;
    try {
        const lunarNewYearArray = getSolarDate(lunarDate.day, lunarDate.month, year); 
        const lunarNewYear = new Date(year, lunarNewYearArray[1] - 1, lunarNewYearArray[0]); 
        canChi = getYearCanChi(lunarNewYear.getFullYear()); 
    } catch (error) {
        console.error("Error in getSolarDate or getYearCanChi:", error);
        return;
    }

    // Hi·ªÉn th·ªã ng√†y √¢m l·ªãch v√† can chi
    const lunarDateElement = document.getElementById("lunarDate");
    if (lunarDateElement) {
        lunarDateElement.innerHTML = `AL: ${lunarDate.day}/${lunarDate.month}<br>${canChi}`;
    } else {
        console.error("Element with ID 'lunarDate' not found.");
    }

    // L·∫•y th√¥ng tin l·ªÖ v√† b√†i ƒë·ªçc
    let feasts, secondFeasts, feast;
    try {
        feasts = calculateFeasts(year);
        secondFeasts = calculateSecondFeasts(year); 
        feast = getFeastForDay(selectedDate, feasts);
    } catch (error) {
        console.error("Error in feast or reading calculations:", error);
        return;
    }

    const feastInfoElement = document.getElementById("feast-info");
    if (feastInfoElement) {
        feastInfoElement.innerHTML = feast ? formatFeastName(feast.name) : 'Kh√¥ng c√≥ l·ªÖ ƒë·∫∑c bi·ªát';
    } else {
        console.error("Element with ID 'feast-info' not found.");
    }

    // X·ª≠ l√Ω n·ªôi dung b√†i ƒë·ªçc
    const readingContent = showfordayContent(selectedDate)?.split('; ') || [];
    const reading1 = showOptionContent(selectedDate);
    const secondFeast = getSecondFeastsForDate(selectedDate, secondFeasts);

    // Ki·ªÉm tra v√† hi·ªÉn th·ªã b√†i ƒë·ªçc ph·ª•
    if (reading1 && reading1 !== "1" && secondFeast === null && !isSameDay(selectedDate, new Date(year, 10, 2)) && !isSameDay(selectedDate, new Date(year, 11, 25))) {
        let info;
        try {
            info = showBibleOptionContentinfo(selectedDate); 
        } catch (error) {
            console.error("Error in showBibleOptionContentinfo:", error);
        }
        const solarDate = selectedDate.toISOString();
        const infoElement = document.getElementById("info");
        const reading1Element = document.getElementById("reading1");
        if (infoElement && reading1Element) {
            infoElement.innerHTML = `<strong><em>${info}</em></strong>`;
            reading1Element.innerHTML = `<div class="readable" id="optional-content">${reading1 || ''}</div>`;
        }

        const optionalContent = document.getElementById("optional-content");
        if (optionalContent) {
            optionalContent.addEventListener('click', function () {
                try {
                    showBibleOptionContent(solarDate);
                } catch (error) {
                    console.error("Error in optionalContent click event:", error);
                }
            });
        } else {
            console.log("Kh√¥ng t√¨m th·∫•y ph·∫ßn t·ª≠ v·ªõi id 'optional-content'");
        }

        document.getElementById("second-feast-info").innerHTML = "Ho·∫∑c b√†i ƒë·ªçc theo m√πa";
        document.getElementById("optional-reading").innerHTML = `
            <div class="readable" onclick="showReadingContent('${solarDate}')">
                <strong>${readingContent[0] || ''}</strong> <em>${readingContent[1] || ''}</em>  
                <strong>${readingContent[2] || ''}
            </div>`;
    } else {
        let info;
        try {
            info = showfordayContentinfo(selectedDate); 
        } catch (error) {
            console.error("Error in showfordayContentinfo:", error);
        }
        const solarDate = selectedDate.toISOString();
        if (readingContent.length === 4) {
            document.getElementById("info").innerHTML = `<strong><em>${info}</em></strong>`;
            document.getElementById("reading1").innerHTML = `
                <div class="readable" onclick="showReadingContent('${solarDate}')">
                    <strong>${readingContent[0] || ''}</strong> <em>${readingContent[1] || ''}</em> 
                    ${readingContent[2] || ''}<strong> ${readingContent[3] || ''}
                </div>`;
        } else if (readingContent.length === 3) {
            document.getElementById("info").innerHTML = `<strong><em>${info}</em></strong>`;
            document.getElementById("reading1").innerHTML = `
                <div class="readable" onclick="showReadingContent('${solarDate}')">
                    <strong>${readingContent[0] || ''}</strong> <em>${readingContent[1] || ''} </em>
                    <strong>${readingContent[2] || ''}
                </div>`;
        }

        document.getElementById("second-feast-info").innerHTML = secondFeast
            ? formatFeastName(secondFeast.name)
            : '';
        
        if (reading1 && reading1 !== "1") {
            const optionalReadingContainer = document.getElementById("optional-reading");

            if (!optionalReadingContainer) {
                console.log("Kh√¥ng t√¨m th·∫•y ph·∫ßn t·ª≠ HTML v·ªõi id 'optional-reading'");
                return;
            }

            optionalReadingContainer.innerHTML = `
                <div class="readable" id="optional-content">
                    ${reading1 || ''}
                </div>`;

            const optionalContent = document.getElementById("optional-content");
            if (optionalContent) {
                optionalContent.addEventListener('click', function () {
                    try {
                        const dateStr = solarDate;
                        showBibleOptionContent(dateStr); // Truy·ªÅn chu·ªói ƒë·ªãnh d·∫°ng ng√†y
                    } catch (error) {
                        console.error("L·ªói khi x·ª≠ l√Ω s·ª± ki·ªán click trong optionalContent:", error);
                    }
                });
            } else {
                console.log("Kh√¥ng t√¨m th·∫•y ph·∫ßn t·ª≠ v·ªõi id 'optional-content'");
            }

            // N·∫øu reading1 l√† m·∫£ng, x·ª≠ l√Ω hi·ªÉn th·ªã th√™m n·ªôi dung b√†i ƒë·ªçc
            if (Array.isArray(reading1)) {
                const reading1Container = document.getElementById("reading1");
                if (!reading1Container) {
                    return;
                }

                if (reading1.length === 4) {
                    reading1Container.innerHTML = `
                        <div class="readable" id="reading1-content">
                            <strong>${reading1[0] || ''}</strong> <em>${reading1[1] || ''}</em> 
                            ${reading1[2] || ''}<strong> ${reading1[3] || ''}
                        </div>`;
                    
                    const reading1Content = document.getElementById("reading1-content");
                    if (reading1Content) {
                        reading1Content.addEventListener('click', function () {
                            try {
                                const dateStr = solarDate; // Chuy·ªÉn ng√†y th√†nh chu·ªói
                                showReadingContent(dateStr); // Truy·ªÅn chu·ªói ƒë·ªãnh d·∫°ng ng√†y
                            } catch (error) {
                                console.error("L·ªói khi x·ª≠ l√Ω s·ª± ki·ªán click trong reading1Content:", error);
                            }
                        });
                    }
                } else if (reading1.length === 3) {
                    reading1Container.innerHTML = `
                        <div class="readable" id="reading1-content">
                            <strong>${reading1[0] || ''}</strong> <em>${reading1[1] || ''}</em> 
                            <strong>${reading1[2] || ''}
                        </div>`;

                    const reading1Content = document.getElementById("reading1-content");
                    if (reading1Content) {
                        reading1Content.addEventListener('click', function () {
                            try {
                                const dateStr = solarDate; // Chuy·ªÉn ng√†y th√†nh chu·ªói
                                showReadingContent(dateStr); // Truy·ªÅn chu·ªói ƒë·ªãnh d·∫°ng ng√†y
                            } catch (error) {
                                console.error("L·ªói khi x·ª≠ l√Ω s·ª± ki·ªán click trong reading1Content:", error);
                            }
                        });
                    }
                }


            }
        } else {
            document.getElementById("optional-reading").textContent = ''; // X√≥a th√¥ng tin b√†i ƒë·ªçc ph·ª• n·∫øu kh√¥ng c√≥ gi√° tr·ªã
        }
    }
}

// Khi trang ƒë∆∞·ª£c t·∫£i, hi·ªÉn th·ªã th√¥ng tin ng√†y h√¥m nay
window.onload = function() {
    displayDateInfo();
};

// H√†m c·∫≠p nh·∫≠t th√¥ng tin khi ch·ªçn ng√†y t·ª´ input
function getFeastForSelectedDate() {
    const inputDate = document.getElementById('inputDate').value;
    if (!inputDate) {
        alert('Vui l√≤ng ch·ªçn m·ªôt ng√†y.');
        return;
    }
    displayDateInfo(inputDate); // C·∫≠p nh·∫≠t th√¥ng tin d·ª±a tr√™n ng√†y ƒë√£ ch·ªçn
}

// Hi·ªÉn th·ªã tu·∫ßn ph·ª•ng v·ª•
function displayWeekInfo(weekType) {
    const today = new Date();
    let startOfWeek;

    // X√°c ƒë·ªãnh tu·∫ßn n√†o s·∫Ω hi·ªÉn th·ªã
    if (weekType === 'previous') {
        // Tu·∫ßn tr∆∞·ªõc
        startOfWeek = new Date(today.setDate(today.getDate() - today.getDay() - 7)); // Ch·ªß Nh·∫≠t tu·∫ßn tr∆∞·ªõc
    } else if (weekType === 'next') {
        // Tu·∫ßn t·ªõi
        startOfWeek = new Date(today.setDate(today.getDate() - today.getDay() + 7)); // Ch·ªß Nh·∫≠t tu·∫ßn t·ªõi
    } else {
        // Tu·∫ßn hi·ªán t·∫°i (default)
        startOfWeek = new Date(today.setDate(today.getDate() - today.getDay())); // Ch·ªß Nh·∫≠t tu·∫ßn n√†y
    }

    const endOfWeek = new Date(startOfWeek);
    endOfWeek.setDate(startOfWeek.getDate() + 6); // K·∫øt th√∫c v√†o Th·ª© B·∫£y

    const year = startOfWeek.getFullYear();
    const feasts = calculateFeasts(year); // L·∫•y c√°c l·ªÖ trong nƒÉm
    const secondFeasts = calculateSecondFeasts(year); // L·∫•y c√°c l·ªÖ v·ªçng

    const giaoKhu = processDate(startOfWeek); 
   
    // C·∫≠p nh·∫≠t hi·ªÉn th·ªã th√¥ng tin tu·∫ßn
    const yearDisplayElement = document.getElementById('yearDisplay');
    const startDateString = `${startOfWeek.getDate()}/${startOfWeek.getMonth() + 1}/${startOfWeek.getFullYear()}`;
    const endDateString = `${endOfWeek.getDate()}/${endOfWeek.getMonth() + 1}/${endOfWeek.getFullYear()}`;
    yearDisplayElement.textContent = `t·ª´ ng√†y ${startDateString} ƒë·∫øn ${endDateString} (Gi√°o khu: ${giaoKhu})`;

    const reportTableBody = document.getElementById('reportTableBody');
    reportTableBody.innerHTML = ''; // X√≥a d·ªØ li·ªáu c≈© trong b·∫£ng

    let currentDay = new Date(startOfWeek); // B·∫Øt ƒë·∫ßu t·ª´ Ch·ªß Nh·∫≠t

    // Hi·ªÉn th·ªã th√¥ng tin cho t·ª´ng ng√†y trong tu·∫ßn
    for (let i = 0; i < 7; i++) {
        const year = currentDay.getFullYear();
        const month = currentDay.getMonth() + 1;
        const day = currentDay.getDate();

        // L·∫•y th√¥ng tin l·ªÖ, m√†u √°o l·ªÖ v√† b√†i ƒë·ªçc cho ng√†y hi·ªán t·∫°i
        let feastAndReadingContent = '';
        const feast = getFeastForDay(currentDay, feasts);
        const chasuble = calculateChasuble(year).getChasubleForDay(currentDay);

        // Th√™m th√¥ng tin v·ªÅ ng√†y l·ªÖ ch√≠nh
        if (feast) {
            feastAndReadingContent += formatFeastName(feast.name) + '<br>';
        } else {
            feastAndReadingContent += 'Kh√¥ng c√≥ l·ªÖ ƒë·∫∑c bi·ªát<br>';
        }

        // Th√™m b√†i ƒë·ªçc v√†o sau th√¥ng tin l·ªÖ

        // Th√™m b√†i ƒë·ªçc v√†o sau th√¥ng tin l·ªÖ
        const Nov2 = new Date(year, 10, 2); // Ng√†y 2 th√°ng 11
        const Dec25 = new Date(year, 11, 25); // Ng√†y 25 th√°ng 12

                // G·ªçi h√†m showfordayContent ƒë·ªÉ l·∫•y n·ªôi dung b√†i ƒë·ªçc
                const readingContent = showfordayContent(currentDay); 
                // Th√™m b√†i ƒë·ªçc ph·ª• v√†o sau ph·∫ßn ng√†y l·ªÖ
                const reading1 = showOptionContent(currentDay); // G·ªçi h√†m showOptionContent ƒë·ªÉ l·∫•y b√†i ƒë·ªçc ph·ª•  
                // T√≠nh to√°n v√† th√™m l·ªÖ v·ªçng (second feast)
                const secondFeast = getSecondFeastsForDate(currentDay, secondFeasts);


                // Ki·ªÉm tra xem c√≥ ph·∫£i ng√†y 25/12 hay kh√¥ng (∆∞u ti√™n x·ª≠ l√Ω tr∆∞·ªõc)
                if (isSameDay(currentDay, Dec25)) {
                    if (readingContent) {
                        feastAndReadingContent += `R·∫°ng ƒê√¥ng: <span class="readable" onclick="showReadingContent('${currentDay.toISOString()}')">${readingContent}</span>`;
                        feastAndReadingContent += `<br>Ban Ng√†y: <span class="readable" onclick="showBibleOptionContent('${currentDay.toISOString()}')"> ${reading1} </span>`;
                    } else {
                        feastAndReadingContent += 'R·∫°ng ƒê√¥ng: Kh√¥ng c√≥ b√†i ƒë·ªçc';  // N·∫øu kh√¥ng c√≥ b√†i ƒë·ªçc cho ng√†y 25/12
                    }
                } 
                // Ki·ªÉm tra xem c√≥ ph·∫£i ng√†y 2/11 hay kh√¥ng
                else if (isSameDay(currentDay, Nov2)) {
                    if (readingContent) {
                        feastAndReadingContent += `L·ªÖ I: <span class="readable" onclick="showReadingContent('${currentDay.toISOString()}')">${readingContent}</span>`;
                        feastAndReadingContent += `<br>L·ªÖ II: <span class="readable" onclick="showBibleOptionContent('${currentDay.toISOString()}')"> ${reading1} </span>`;
                    } else {
                        feastAndReadingContent += 'L·ªÖ I: Kh√¥ng c√≥ b√†i ƒë·ªçc';  // N·∫øu kh√¥ng c√≥ b√†i ƒë·ªçc cho ng√†y 2/11
                    }
                } 
                // Ki·ªÉm tra b√†i ƒë·ªçc ph·ª• v√† kh√¥ng ph·∫£i l√† ng√†y 2/11
                else if (reading1 && reading1 !== "1" && secondFeast === null && !isSameDay(currentDay, Nov2)) {
                    feastAndReadingContent += `<span class="readable" onclick="showBibleOptionContent('${currentDay.toISOString()}')"> ${reading1} </span>`;
                    feastAndReadingContent += `<br> Ho·∫∑c ƒë·ªçc theo m√πa: <span class="readable" onclick="showReadingContent('${currentDay.toISOString()}')">${readingContent}</span>`;
                } 
                // M·∫∑c ƒë·ªãnh cho c√°c ng√†y kh√°c
                else {
                    if (readingContent) {
                        feastAndReadingContent += `<span class="readable" onclick="showReadingContent('${currentDay.toISOString()}')">${readingContent}</span>`;
                    } else {
                        feastAndReadingContent += 'Kh√¥ng c√≥ b√†i ƒë·ªçc';  // N·∫øu kh√¥ng c√≥ b√†i ƒë·ªçc cho ng√†y kh√¥ng ƒë·∫∑c bi·ªát
                    }
                }

                // T√≠nh to√°n v√† th√™m l·ªÖ v·ªçng (second feast)       
                if (secondFeast) {
                    feastAndReadingContent += '<br><strong>' + formatFeastName(secondFeast.name) + '</strong><br>';
                }

                 // Th√™m b√†i ƒë·ªçc ph·ª• v√†o sau ph·∫ßn ng√†y l·ªÖ             

                if (reading1 && reading1 !== "1") {
                    if(secondFeast){
                    feastAndReadingContent += `
                        <div class="readable" onclick="showBibleOptionContent('${currentDay.toISOString()}')">
                            ${reading1}
                        </div>
                    `;
            
                    }
                }               
                        
            //Nh·ªØng ng√†y l·ªÖ ri√™ng
            const optionFeasts = calculateOptionFeasts(currentDay);
                feastAndReadingContent += `
                    <div class="Optionfeats">
                        ${optionFeasts.map(feast => `${feast.name}`).join('')}
                    </div>
                `;
            //Ch·∫ßu th√°nh Th·ªÉ
                feastAndReadingContent += `
                    <div class="EucharisticAdoration">
                        ${window.calculateEucharisticAdoration.getEucharisticAdorationContent(currentDay)}
                    </div>
                `;   
              
        // T·∫°o h√†ng m·ªõi trong b·∫£ng
        const row = document.createElement('tr');

        // N·∫øu l√† Ch·ªß Nh·∫≠t, th√™m hi·ªáu ·ª©ng 3D
        if (currentDay.getDay() === 0) {
            row.classList.add('sunday');
        }

        // G√°n l·ªõp m√†u n·ªÅn cho h√†ng theo chasuble
        const chasubleClass = getChasubleClass(chasuble);
        if (chasubleClass) {
            row.classList.add(chasubleClass);
        }

        // Ng√†y d∆∞∆°ng l·ªãch v√† √¢m l·ªãch ƒë∆∞·ª£c hi·ªÉn th·ªã trong c√πng m·ªôt √¥
        const solarDateCell = document.createElement('td');
        const lunarDate = convertToLunarDate({ day, month, year });

        // Hi·ªÉn th·ªã ng√†y d∆∞∆°ng l·ªãch v·ªõi ch·ªØ ƒë·∫≠m v√† ng√†y √¢m l·ªãch v·ªõi m√†u xanh ƒë·∫≠m
        solarDateCell.innerHTML = `<strong>${day}/${month}</strong><br><em><span style="color: darkblue;">(${lunarDate.day}/${lunarDate.month})</span><em>`;
        row.appendChild(solarDateCell);

        // M√†u √°o l·ªÖ
        const chasubleCell = document.createElement('td');
        chasubleCell.textContent = chasuble || 'Xanh';
        row.appendChild(chasubleCell);

        // Th√¥ng tin l·ªÖ v√† b√†i ƒë·ªçc
        const feastAndReadingCell = document.createElement('td');
        feastAndReadingCell.innerHTML = feastAndReadingContent;
        row.appendChild(feastAndReadingCell);

        reportTableBody.appendChild(row);

        // Chuy·ªÉn sang ng√†y ti·∫øp theo
        currentDay.setDate(currentDay.getDate() + 1);
    }

}


// H√†m d√†nh cho mobile
function displayMonthInfoMobile() {
    // L·∫•y th√°ng v√† nƒÉm t·ª´ modal tr√™n mobile
    const month = parseInt(document.getElementById('mobileMonthInput').value);
    const year = parseInt(document.getElementById('mobileYearInput').value);

    if (isNaN(month) || isNaN(year)) {
        console.error("Th√°ng ho·∫∑c nƒÉm kh√¥ng h·ª£p l·ªá.");
        return;
    }

    // G·ªçi h√†m chung ƒë·ªÉ hi·ªÉn th·ªã th√¥ng tin v·ªõi th√°ng v√† nƒÉm ƒë∆∞·ª£c ch·ªçn
    displayMonth(month, year);
}

function displayMonthInfo() {
       
    const month = parseInt(document.getElementById('monthInput').value);
    const year = parseInt(document.getElementById('yearInput').value);

    displayMonth(month, year);
}

function displayMonth(month, year) {
    // T√≠nh s·ªë ng√†y trong th√°ng ƒë∆∞·ª£c ch·ªçn
    const daysInMonth = new Date(year, month, 0).getDate();

    // L·∫•y c√°c l·ªÖ trong nƒÉm
    const feasts = calculateFeasts(year);
    const secondFeasts = calculateSecondFeasts(year); // L·∫•y c√°c l·ªÖ v·ªçng (n·∫øu c√≥)

        // M√πa Ph·ª•ng V·ª•:
        let liturgicalYear = getLiturgicalYear(year);
     
        if (month === 12) {                   
                liturgicalYear = getLiturgicalYear(year + 1);
        }

        // C·∫≠p nh·∫≠t n·ªôi dung c·ªßa th·∫ª <span id="yearDisplay"> ƒë·ªÉ hi·ªÉn th·ªã th√°ng, nƒÉm v√† nƒÉm ph·ª•ng v·ª•
        const yearDisplayElement = document.getElementById('yearDisplay');
        yearDisplayElement.textContent = `Th√°ng ${month} - NƒÉm ${year} : (${liturgicalYear})`;


    // L·∫•y ph·∫ßn body c·ªßa b·∫£ng ƒë·ªÉ th√™m n·ªôi dung v√†o
    const reportTableBody = document.getElementById('reportTableBody');
    reportTableBody.innerHTML = ''; // X√≥a d·ªØ li·ªáu c≈© trong b·∫£ng

    // Bi·∫øn ƒë·ªÉ l∆∞u s·ªë tu·∫ßn hi·ªán t·∫°i
    let lastWeekNumber = -1;

    // L·∫∑p qua t·ª´ng ng√†y trong th√°ng
    for (let day = 1; day <= daysInMonth; day++) {
        const currentDate = new Date(year, month - 1, day);
        const currentWeekNumber = Math.ceil((day - currentDate.getDay() + 1) / 7); // S·ªë tu·∫ßn trong th√°ng

        // Th√™m ngƒÉn c√°ch gi·ªØa c√°c tu·∫ßn n·∫øu s·ªë tu·∫ßn thay ƒë·ªïi
        if (currentWeekNumber !== lastWeekNumber && lastWeekNumber !== -1) {
            const separatorRow = document.createElement('tr');
            separatorRow.classList.add('week-separator');
            const separatorCell = document.createElement('td');
            separatorCell.colSpan = 4; // S·ªë c·ªôt trong b·∫£ng
            separatorRow.appendChild(separatorCell);
            reportTableBody.appendChild(separatorRow);
        }
        lastWeekNumber = currentWeekNumber;

        // T·∫°o h√†ng m·ªõi trong b·∫£ng cho m·ªói ng√†y
        const row = document.createElement('tr');

        // L·∫•y th√¥ng tin l·ªÖ, m√†u √°o l·ªÖ v√† b√†i ƒë·ªçc cho ng√†y hi·ªán t·∫°i
        let feastAndReadingContent = '';
        const feast = getFeastForDay(currentDate, feasts); // L·∫•y th√¥ng tin l·ªÖ
        const chasuble = calculateChasuble(year).getChasubleForDay(currentDate); // L·∫•y m√†u √°o l·ªÖ

        // Th√™m th√¥ng tin v·ªÅ ng√†y l·ªÖ ch√≠nh
        if (feast) {
            feastAndReadingContent += formatFeastName(feast.name) + '<br>';
        } else {
            feastAndReadingContent += 'Kh√¥ng c√≥ l·ªÖ ƒë·∫∑c bi·ªát<br>';
        }

            // Th√™m b√†i ƒë·ªçc v√†o sau th√¥ng tin l·ªÖ
            const Nov2 = new Date(year, 10, 2); // Ng√†y 2 th√°ng 11
            const Dec25 = new Date(year, 11, 25); // Ng√†y 25 th√°ng 12

            // G·ªçi h√†m showfordayContent ƒë·ªÉ l·∫•y n·ªôi dung b√†i ƒë·ªçc
            const readingContent = showfordayContent(currentDate); 
            // Th√™m b√†i ƒë·ªçc ph·ª• v√†o sau ph·∫ßn ng√†y l·ªÖ
            const reading1 = showOptionContent(currentDate); // G·ªçi h√†m showOptionContent ƒë·ªÉ l·∫•y b√†i ƒë·ªçc ph·ª•  
            // T√≠nh to√°n v√† th√™m l·ªÖ v·ªçng (second feast)
            const secondFeast = getSecondFeastsForDate(currentDate, secondFeasts);

           

            // Ki·ªÉm tra xem c√≥ ph·∫£i ng√†y 25/12 hay kh√¥ng (∆∞u ti√™n x·ª≠ l√Ω tr∆∞·ªõc)
            if (isSameDay(currentDate, Dec25)) {
                if (readingContent) {
                    feastAndReadingContent += `R·∫°ng ƒê√¥ng: <span class="readable" onclick="showReadingContent('${currentDate.toISOString()}')">${readingContent}</span>`;
                    feastAndReadingContent += `<br>Ban Ng√†y: <span class="readable" onclick="showBibleOptionContent('${currentDate.toISOString()}')"> ${reading1} </span>`;
                } else {
                    feastAndReadingContent += 'R·∫°ng ƒê√¥ng: Kh√¥ng c√≥ b√†i ƒë·ªçc';  // N·∫øu kh√¥ng c√≥ b√†i ƒë·ªçc cho ng√†y 25/12
                }
            } 
            // Ki·ªÉm tra xem c√≥ ph·∫£i ng√†y 2/11 hay kh√¥ng
            else if (isSameDay(currentDate, Nov2)) {
                if (readingContent) {
                    feastAndReadingContent += `L·ªÖ I: <span class="readable" onclick="showReadingContent('${currentDate.toISOString()}')">${readingContent}</span>`;
                    feastAndReadingContent += `<br>L·ªÖ II: <span class="readable" onclick="showBibleOptionContent('${currentDate.toISOString()}')"> ${reading1} </span>`;
                } else {
                    feastAndReadingContent += 'L·ªÖ I: Kh√¥ng c√≥ b√†i ƒë·ªçc';  // N·∫øu kh√¥ng c√≥ b√†i ƒë·ªçc cho ng√†y 2/11
                }
            } 
            // Ki·ªÉm tra b√†i ƒë·ªçc ph·ª• v√† kh√¥ng ph·∫£i l√† ng√†y 2/11
            else if (reading1 && reading1 !== "1" && secondFeast === null && !isSameDay(currentDate, Nov2)) {
                feastAndReadingContent += `<span class="readable" onclick="showBibleOptionContent('${currentDate.toISOString()}')"> ${reading1} </span>`;
                feastAndReadingContent += `<br> Ho·∫∑c ƒë·ªçc theo m√πa: <span class="readable" onclick="showReadingContent('${currentDate.toISOString()}')">${readingContent}</span>`;
            } 
            // M·∫∑c ƒë·ªãnh cho c√°c ng√†y kh√°c
            else {
                if (readingContent) {
                    feastAndReadingContent += `<span class="readable" onclick="showReadingContent('${currentDate.toISOString()}')">${readingContent}</span>`;
                } else {
                    feastAndReadingContent += 'Kh√¥ng c√≥ b√†i ƒë·ªçc';  // N·∫øu kh√¥ng c√≥ b√†i ƒë·ªçc cho ng√†y kh√¥ng ƒë·∫∑c bi·ªát
                }
            }



            if (secondFeast) {
            feastAndReadingContent += '<br><strong>' + formatFeastName(secondFeast.name) + '</strong><br>';
            }


            // Th√™m b√†i ƒë·ªçc ph·ª• v√†o sau ph·∫ßn ng√†y l·ªÖ
            
            if ((reading1 && reading1 !== "1")) {
                if (secondFeast) {
                    feastAndReadingContent += `
                        <div class="readable" onclick="showBibleOptionContent('${currentDate.toISOString()}')">
                            ${reading1}
                        </div>
                    `;
                }
            }
                      
             //Nh·ªØng ng√†y l·ªÖ ri√™ng
              const optionFeasts = calculateOptionFeasts(currentDate);
                  feastAndReadingContent += `
                        <div class="Optionfeats">
                            ${optionFeasts.map(feast => `${feast.name}`).join('')}
                        </div>
                    `;
            // Phi√™n Ch·∫ßu th√°nh th·ªÉ
                feastAndReadingContent += `
                        <div class="EucharisticAdoration">
                            ${window.calculateEucharisticAdoration.getEucharisticAdorationContent(currentDate)}
                        </div>
                    `;      

        // Ng√†y d∆∞∆°ng l·ªãch v√† √¢m l·ªãch ƒë∆∞·ª£c hi·ªÉn th·ªã trong c√πng m·ªôt √¥
        const solarDateCell = document.createElement('td');
        const lunarDate = convertToLunarDate({ day, month, year });

        // Hi·ªÉn th·ªã ng√†y d∆∞∆°ng l·ªãch v·ªõi ch·ªØ ƒë·∫≠m v√† ng√†y √¢m l·ªãch v·ªõi m√†u xanh ƒë·∫≠m
        solarDateCell.innerHTML = `<strong>${day}/${month}</strong><br><em><span style="color: darkblue;">(${lunarDate.day}/${lunarDate.month})</span></em>`;
        row.appendChild(solarDateCell);

        // M√†u √°o l·ªÖ
        const chasubleCell = document.createElement('td');
        chasubleCell.innerHTML = `<strong>${chasuble || 'Xanh'}</strong>`; // Hi·ªÉn th·ªã m√†u √°o l·ªÖ, n·∫øu kh√¥ng c√≥ th√¨ m·∫∑c ƒë·ªãnh l√† 'Xanh'
        row.appendChild(chasubleCell);

        // Th√¥ng tin l·ªÖ v√† b√†i ƒë·ªçc
        const feastAndReadingCell = document.createElement('td');
        feastAndReadingCell.innerHTML = updateFeastAndReadingContent(currentDate, feastAndReadingContent);
        row.appendChild(feastAndReadingCell);

        // N·∫øu l√† Ch·ªß Nh·∫≠t, th√™m hi·ªáu ·ª©ng 3D
        if (currentDate.getDay() === 0) {
            row.classList.add('sunday');
        }

        // G√°n l·ªõp m√†u n·ªÅn cho h√†ng theo chasuble
        const chasubleClass = getChasubleClass(chasuble);
        if (chasubleClass) {
            row.classList.add(chasubleClass);
        }

        // Th√™m h√†ng v√†o b·∫£ng
        reportTableBody.appendChild(row);

        // Chuy·ªÉn sang ng√†y ti·∫øp theo
        currentDate.setDate(currentDate.getDate() + 1);
    }
}

// H√†m so s√°nh ng√†y, th√°ng, nƒÉm c·ªßa hai ƒë·ªëi t∆∞·ª£ng Date
function isSameDay(date1, date2) {
    return date1.getFullYear() === date2.getFullYear() &&
           date1.getMonth() === date2.getMonth() &&
           date1.getDate() === date2.getDate();
}

// c√°c h√†m ph·ª• tr·ª£ cho hi·ªÉn th·ªã
    // xu·ªëng 1.5 h√†ng khi g·∫∑p k√Ω t·ª± trong b√†i ƒë·ªçc
    function formatWithLineBreaks(text) {
        if (!text) return ''; // Ki·ªÉm tra chu·ªói tr·ªëng
        // S·ª≠ d·ª•ng div v·ªõi line-height ƒë·ªÉ t·∫°o kho·∫£ng c√°ch d√≤ng l·ªõn h∆°n
        return text.replace(/(\r\n|\n|\r)/g, '<div style="line-height: 2;"></div>'); 
    }


    // H√†m ph·ª• tr·ª£ ƒë·ªÉ ƒë·ªãnh d·∫°ng t·ª´ng b√†i ƒë·ªçc (b√†i ƒë·ªçc I, II, Tin M·ª´ng)
    function formatReadingPart(title, readingPart) {
        if (!readingPart) return `<strong style="color: red;"> ${title}:</strong> Not available<br><br>`;
        
        return `
            <br><strong style="color: red;">${title}:</strong> ${formatWithLineBreaks(readingPart.excerpt)} <br>
            <br><em>${formatWithLineBreaks(readingPart.info || '')}</em><br>
            <br><strong>${formatWithLineBreaks(readingPart.title || '')}</strong><br>
            <br>${formatWithLineBreaks(readingPart.content || '')}<br>
            <br><strong>${formatWithLineBreaks(readingPart.end || '')}</strong><br><br>
        `;
    }

    // H√†m ph·ª• tr·ª£ ƒë·ªÉ ƒë·ªãnh d·∫°ng ph·∫ßn ƒê√°p ca
    function formatPsalms(psalms) {
        if (!psalms) return '<strong>ƒê√°p ca:</strong> Not available<br><br>';
        
        return `
            <strong style="color: red;"> ƒê√°p ca:</strong> ${formatWithLineBreaks(psalms.excerpt)} <br>
            <br><strong>${formatWithLineBreaks(psalms.response)}</strong><br>
            <br><em>${psalms.verses.map(formatWithLineBreaks).join('<br><br>')}</em><br><br>
        `;
    }

    // H√†m ph·ª• tr·ª£ ƒë·ªÉ ƒë·ªãnh d·∫°ng ph·∫ßn X∆∞·ªõng tr∆∞·ªõc Tin M·ª´ng
    function formatAlleluia(alleluia) {
        if (!alleluia) return '<strong style="color: red;">X∆∞·ªõng tr∆∞·ªõc Tin M·ª´ng:</strong> Not available<br><br>';
        
        return `
            <strong style="color: red;"> X∆∞·ªõng tr∆∞·ªõc Tin M·ª´ng:</strong> ${formatWithLineBreaks(alleluia.verse)} <br>
            <br><strong>${formatWithLineBreaks(alleluia.content)}</strong><br><br>
        `;
    }
      
// C√°c H√†m li√™n quan b√†i ƒë·ªçc ch√≠nh
function showReadingContent(dateString) {
    const date = new Date(dateString);  // Chuy·ªÉn ƒë·ªïi chu·ªói th√†nh ƒë·ªëi t∆∞·ª£ng Date
    const reading = getBibleByFourDigitCode(date);  // L·∫•y b√†i ƒë·ªçc
    const year = date.getFullYear();
    const feasts = calculateFeasts(year); // L·∫•y danh s√°ch l·ªÖ
    updateModalTitle(date, feasts); // C·∫≠p nh·∫≠t ti√™u ƒë·ªÅ modal
    if (reading) {
        // Bi·∫øn l∆∞u tr·ªØ n·ªôi dung b√†i ƒë·ªçc v·ªõi c√°c ƒëi·ªÅu ki·ªán ki·ªÉm tra t·ª´ng ph·∫ßn
        const readingContent = `
            ${formatReadingPart('B√†i ƒê·ªçc I', reading.firstReading)}
            ${formatPsalms(reading.psalms)}
            ${reading.secondReading ? formatReadingPart('B√†i ƒê·ªçc II', reading.secondReading) : ''} 
            ${formatAlleluia(reading.alleluia)}
            ${formatReadingPart('Tin M·ª´ng', reading.gospel)}
            `;
                if (reading) {
            // C·∫≠p nh·∫≠t n·ªôi dung cho B√†i ƒê·ªçc I
            const reading01Element = document.getElementById("reading01");
            if (reading01Element) {
                reading01Element.innerHTML = formatReadingPart('B√†i ƒê·ªçc I', reading.firstReading);
                reading01Element.classList.add("show"); // Hi·ªÉn th·ªã B√†i ƒê·ªçc I khi c√≥ n·ªôi dung
            }

            // C·∫≠p nh·∫≠t n·ªôi dung cho Th√°nh V·ªãnh n·∫øu c√≥
            const psalmElement = document.getElementById("psalm01");
            if (psalmElement) {
                psalmElement.innerHTML = formatPsalms(reading.psalms);
                if (reading.psalms) {
                    psalmElement.classList.add("show");
                } else {
                    psalmElement.classList.remove("show");
                }
            }

            // C·∫≠p nh·∫≠t n·ªôi dung cho B√†i ƒê·ªçc II n·∫øu c√≥
            const reading02Element = document.getElementById("reading02");
            if (reading02Element) {
                reading02Element.innerHTML = reading.secondReading ? formatReadingPart('B√†i ƒê·ªçc II', reading.secondReading) : "";
                if (reading.secondReading) {
                    reading02Element.classList.add("show");
                } else {
                    reading02Element.classList.remove("show");
                }
            }

            // C·∫≠p nh·∫≠t n·ªôi dung cho Alleluia n·∫øu c√≥
            const alleluiaElement = document.getElementById("alleluia01");
            if (alleluiaElement) {
                alleluiaElement.innerHTML = reading.alleluia ? formatAlleluia(reading.alleluia) : "";
                if (reading.alleluia) {
                    alleluiaElement.classList.add("show");
                } else {
                    alleluiaElement.classList.remove("show");
                }
            }

            // C·∫≠p nh·∫≠t n·ªôi dung cho Tin M·ª´ng
            const gospelElement = document.getElementById("gospel01");
            if (gospelElement) {
                gospelElement.innerHTML = formatReadingPart('Tin M·ª´ng', reading.gospel);
                gospelElement.classList.add("show");
            }
        }



    }

    // Hi·ªÉn th·ªã modal v√† overlay
    document.getElementById("readingModal").style.display = "block"; 
    document.getElementById("modalOverlay").style.display = "block"; 
}



// H√†m hi·ªÉn th·ªã t√™n b√†i ƒë·ªçc ch√≠nh
function showfordayContent(date) {
    const reading = getBibleByFourDigitCode(date); // G·ªçi h√†m ƒë·ªÉ l·∫•y b√†i ƒë·ªçc
    if (reading) {
        // Lo·∫°i b·ªè (NƒÉm I) ho·∫∑c (NƒÉm II) b·∫•t k·ªÉ ch·ªØ hoa hay ch·ªØ th∆∞·ªùng
        const reading1 = reading.firstReading ? `${reading.firstReading.excerpt.replace(/\(nƒÉm i\)|\(nƒÉm ii\)/gi, '').trim()}; ` : 'Kh√¥ng c√≥ B√†i ƒê·ªçc I';
        const psalm = reading.psalms ? `${reading.psalms.excerpt}; ` : 'Kh√¥ng c√≥ Th√°nh V·ªãnh';
        const reading2 = reading.secondReading ? `${reading.secondReading.excerpt}; ` : '';
        const gospel = reading.gospel ? `${reading.gospel.excerpt}` : 'Kh√¥ng c√≥ Tin M·ª´ng';

        // K·∫øt h·ª£p t·∫•t c·∫£ c√°c ph·∫ßn v√†o m·ªôt chu·ªói
        const readingContent = `${reading1}${psalm}${reading2}${gospel}`;
       // const readingContent = `${reading1}${reading2}${gospel}`;

        // Tr·∫£ v·ªÅ chu·ªói n·ªôi dung b√†i ƒë·ªçc
        return readingContent;
    } else {
        return; // Tr·∫£ v·ªÅ chu·ªói th√¥ng b√°o
    }
}
  
 // c√¢u th√°nh kinh info cho ng√†y hi·ªÉn th·ªã
            function showBibleOptionContentinfo(date) {
                const reading = getBibleByOptionDigitCode(date); // G·ªçi h√†m ƒë·ªÉ l·∫•y b√†i ƒë·ªçc
                        if (reading) {
                        
                            const Infogospel = reading.gospel ? `${reading.gospel.info}` : '';
                            // Tr·∫£ v·ªÅ chu·ªói n·ªôi dung b√†i ƒë·ªçc
                            return Infogospel;
                        } else {
                            return; // Tr·∫£ v·ªÅ chu·ªói th√¥ng b√°o
                        }
                    }

              // H√†m hi·ªÉn th·ªã n·ªôi dung b√†i ƒë·ªçc t√πy ch·ªçn
            function showBibleOptionContent(dateString) {
                const date = new Date(dateString);  // Chuy·ªÉn ƒë·ªïi chu·ªói th√†nh ƒë·ªëi t∆∞·ª£ng Date
                const reading = getBibleByOptionDigitCode(date);  // L·∫•y b√†i ƒë·ªçc t·ª´ m√£ t√πy ch·ªçn
                const year = date.getFullYear();
                const feasts = calculateFeasts(year); // L·∫•y danh s√°ch l·ªÖ
                updateModalTitle1(date, feasts); // C·∫≠p nh·∫≠t ti√™u ƒë·ªÅ modal

                if (reading) {
                    // C·∫≠p nh·∫≠t n·ªôi dung cho B√†i ƒê·ªçc I
                    const reading01Element = document.getElementById("reading01");
                    if (reading01Element) {
                        reading01Element.innerHTML = formatReadingPart('B√†i ƒê·ªçc I', reading.firstReading);
                        reading01Element.classList.add("show");
                    }

                    // C·∫≠p nh·∫≠t n·ªôi dung cho Th√°nh V·ªãnh n·∫øu c√≥
                    const psalmElement = document.getElementById("psalm01");
                    if (psalmElement) {
                        psalmElement.innerHTML = formatPsalms(reading.psalms);
                        if (reading.psalms) {
                            psalmElement.classList.add("show");
                        } else {
                            psalmElement.classList.remove("show");
                        }
                    }

                    // C·∫≠p nh·∫≠t n·ªôi dung cho B√†i ƒê·ªçc II n·∫øu c√≥
                    const reading02Element = document.getElementById("reading02");
                    if (reading02Element) {
                        reading02Element.innerHTML = reading.secondReading 
                            ? formatReadingPart('B√†i ƒê·ªçc II', reading.secondReading) 
                            : "";
                        if (reading.secondReading) {
                            reading02Element.classList.add("show");
                        } else {
                            reading02Element.classList.remove("show");
                        }
                    }

                    // C·∫≠p nh·∫≠t n·ªôi dung cho Alleluia n·∫øu c√≥
                    const alleluiaElement = document.getElementById("alleluia01");
                    if (alleluiaElement) {
                        alleluiaElement.innerHTML = reading.alleluia 
                            ? formatAlleluia(reading.alleluia) 
                            : "";
                        if (reading.alleluia) {
                            alleluiaElement.classList.add("show");
                        } else {
                            alleluiaElement.classList.remove("show");
                        }
                    }

                    // C·∫≠p nh·∫≠t n·ªôi dung cho Tin M·ª´ng
                    const gospelElement = document.getElementById("gospel01");
                    if (gospelElement) {
                        gospelElement.innerHTML = formatReadingPart('Tin M·ª´ng', reading.gospel);
                        gospelElement.classList.add("show");
                    }
                } else {
                    // N·∫øu kh√¥ng c√≥ b√†i ƒë·ªçc, hi·ªÉn th·ªã th√¥ng b√°o th√¢n thi·ªán h∆°n
                    document.getElementById("readingContent").innerHTML = 
                        "<p class='no-reading-message'>Kh√¥ng c√≥ b√†i ƒë·ªçc n√†o cho ng√†y n√†y.</p>";
                }

                // Hi·ªÉn th·ªã modal v√† overlay
                document.getElementById("readingModal").style.display = "block";
                document.getElementById("modalOverlay").style.display = "block";
            }



            function formatReadingPart(title, reading) {
                if (!reading || typeof reading !== 'object') return '';

                // ƒê·ªãnh d·∫°ng c√°c ph·∫ßn c·ªßa b√†i ƒë·ªçc
                const excerpt = reading.excerpt 
                    ? `<span style="font-family: Arial; font-size: 18px;">${reading.excerpt}</span>` 
                    : '';
                const info = reading.info 
                    ? `<p style="font-family: Arial;"><em>${reading.info}</em></p>` 
                    : '';
                const readingTitle = reading.title 
                    ? `<h4 style="font-family: Arial;">${reading.title}</h4>` 
                    : '';
                
                // G·ªçi h√†m formatWithLineBreaks ƒë·ªÉ ƒë·ªãnh d·∫°ng n·ªôi dung
                const content = reading.content 
                    ? `<p style="font-family: Arial;">${formatWithLineBreaks(reading.content)}</p>` 
                    : '';
                
                const end = reading.end 
                    ? `<p style="font-weight: bold; font-family: Arial;">${reading.end}</p>` 
                    : '';

                // K·∫øt h·ª£p ti√™u ƒë·ªÅ v√† excerpt tr√™n c√πng m·ªôt h√†ng v·ªõi ti√™u ƒë·ªÅ m√†u ƒë·ªè
                return `
                    <h3 style="display: inline; color: red; font-family: Arial;">${title}</h3> ${excerpt}
                    ${info}
                    ${readingTitle}
                    ${content}  <!-- N·ªôi dung ƒë∆∞·ª£c ƒë·ªãnh d·∫°ng v·ªõi d√≤ng ng·∫Øt -->
                    ${end}
                `;
            }

            function formatPsalms(psalms) {
                // Ki·ªÉm tra n·∫øu psalms t·ªìn t·∫°i
                if (!psalms || typeof psalms !== 'object') return '';

                // ƒê·ªãnh d·∫°ng ph·∫ßn tr√≠ch ƒëo·∫°n (excerpt) tr√™n c√πng d√≤ng v·ªõi ƒê√°p Ca
                const excerpt = psalms.excerpt ? `<span style="color: black; font-weight: normal; font-family: Arial; font-size: 18px;">: ${psalms.excerpt}</span>` : '';


                // ƒê·ªãnh d·∫°ng ph·∫ßn ƒë√°p ca (response), l√†m n·ªïi b·∫≠t t·ª´ "√ê√°p:"
                const response = psalms.response 
                    ? `<h4 style="font-family: Arial;">${psalms.response.replace(/(√ê√°p:)/g, '<span style="font-weight: bold; color: blue; font-family: Arial;">$1</span>')}</h4>`
                    : '';

                // ƒê·ªãnh d·∫°ng c√°c c√¢u (verses)
                const verses = psalms.verses && Array.isArray(psalms.verses)
                    ? psalms.verses.map(verse => {
                        const formattedVerse = verse.replace(/(X∆∞·ªõng:)/g, '<span style="font-weight: bold; color: blue; font-family: Arial;">$1</span>');
                        return `<p style="font-family: Arial;"><em>${formattedVerse}</em></p>`;
                    }).join('')
                    : '';

                // K·∫øt h·ª£p t·∫•t c·∫£ c√°c ph·∫ßn l·∫°i v·ªõi nhau
                return `
                    <h3 style="color: red; font-family: Arial;">ƒê√°p Ca${excerpt}</h3>
                    ${response}
                    ${verses}
                `;
            }

                function formatAlleluia(alleluia) {
                    if (!alleluia || typeof alleluia !== 'object') return '';

                    // ƒê·ªãnh d·∫°ng c√°c ph·∫ßn c·ªßa Alleluia
                    const verse = alleluia.verse 
                        ? `<h4 style="font-family: Arial; "><span style="font-weight: bold; color: red;">X∆∞·ªõng tr∆∞·ªõc Tin M·ª´ng:</span> <span style="font-weight: normal; font-size: 18px">${alleluia.verse}</span></h4>` 
                        : '';

                    // ƒê·ªãnh d·∫°ng n·ªôi dung c·ªßa Alleluia, ch·ªâ thay th·∫ø t·ª´ "alleluia" ·ªü ƒë·∫ßu c√¢u n·∫øu c√≥
                    let content = alleluia.content || 'Alleluia, Alleluia';

                    // Ki·ªÉm tra n·∫øu n·ªôi dung b·∫Øt ƒë·∫ßu b·∫±ng "alleluia", thay th·∫ø n√≥ b·∫±ng "Alleluia, Alleluia"
                    content = content.replace(/^\s*alleluia\s*[\.,-]*/i, 'Alleluia, Alleluia');

                    // Ki·ªÉm tra n·∫øu n·ªôi dung c√≥ qu√° nhi·ªÅu c·ª•m "Alleluia, Alleluia" v√† x√≥a b·ªõt n·∫øu c·∫ßn
                    content = content.replace(/(Alleluia, Alleluia)(\s*[,.-]*\s*Alleluia)*/gi, 'Alleluia, Alleluia');

                    // ƒê·ªãnh d·∫°ng l·∫°i th√†nh th·∫ª HTML
                    content = `<p style="font-family: Arial;">${content}</p>`;

                    // K·∫øt h·ª£p t·∫•t c·∫£ c√°c ph·∫ßn l·∫°i v·ªõi nhau
                    return `
                        ${verse}
                        ${content}
                    `;
                }

                // H√†m hi·ªÉn th·ªã t√™n b√†i ƒë·ªçc ph·ª•
            function showOptionContent(date) {
                const reading = getBibleByOptionDigitCode(date); // t·∫°i sao b√°o l·ªói h√†m ch∆∞a ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a???
               if (reading) {
                    const reading1 = reading.firstReading ? `${reading.firstReading.excerpt}; ` : 'Kh√¥ng c√≥ B√†i ƒê·ªçc I';
                    const psalm = reading.psalms ? `${reading.psalms.excerpt}; ` : 'Kh√¥ng c√≥ Th√°nh V·ªãnh';
                    const reading2 = reading.secondReading ? `${reading.secondReading.excerpt}; ` : '';
                    const gospel = reading.gospel ? `${reading.gospel.excerpt}` : '';

                    // K·∫øt h·ª£p t·∫•t c·∫£ c√°c ph·∫ßn v√†o m·ªôt chu·ªói
                    //const readingContent = `${reading1}${psalm}${reading2}${gospel}`;
                    const readingContent = `${reading1}${reading2}<strong>${gospel}</strong>`;
                     return readingContent;
                } else {
                    return '';
                }
            }

   

        // c√¢u th√°nh kinh info cho ng√†y hi·ªÉn th·ªã
        function showfordayContentinfo(date) {
            const reading = getBibleByFourDigitCode(date); // G·ªçi h√†m ƒë·ªÉ l·∫•y b√†i ƒë·ªçc
            if (reading) {
            
                const Infogospel = reading.gospel ? `${reading.gospel.info}` : '';
                // Tr·∫£ v·ªÅ chu·ªói n·ªôi dung b√†i ƒë·ªçc
                return Infogospel;
            } else {
                return; // Tr·∫£ v·ªÅ chu·ªói th√¥ng b√°o
            }
        }


        // H√†m ƒë·ªãnh d·∫°ng t√™n l·ªÖ theo y√™u c·∫ßu
        function formatFeastName(feastName) {
            if (feastName.includes("L·ªÖ nh·ªõ")) {
                const feastParts = feastName.split('.');
                if (feastParts.length > 1) {
                    const firstPart = feastParts[0] + '.';
                    const secondPart = feastParts.slice(1).join('.');
                    return `${firstPart} <span class="feast-bold">${secondPart}</span>`;
                } else {
                    return feastName;
                }
            } else if (feastName.includes("L·ªÖ k√≠nh")) {
                return feastName.replace("L·ªÖ k√≠nh", `<span class="feast-bold">L·ªÖ k√≠nh</span>`);
            } else if (feastName.includes("CH√öA NH·∫¨T")) {
                const feastParts = feastName.split('.');
                if (feastParts.length > 1) {
                    const firstPart = feastParts[0] + '.';
                    const secondPart = feastParts.slice(1).join('.');
                    return `<span class="feast-bold"> ${firstPart}</span> ${secondPart}`;
                }
            } else if (feastName.includes("L·ªÖ tr·ªçng")) {
                return `<span class="feast-bold">${feastName}</span>`;
            }
            return feastName;
        }

        // H√†m chuy·ªÉn ƒë·ªïi m√†u Chasuble th√†nh l·ªõp CSS cho m√†u n·ªÅn
        function getChasubleClass(chasuble) {
            switch (chasuble) {
                case 'Tr': return 'bg-Tr'; // M√†u tr·∫Øng
                case 'Tm': return 'bg-Tm'; // M√†u t√≠m
                case 'ƒê': return 'bg-ƒê';   // ƒê·ªè nh·∫π
                case 'X': return 'bg-X';   // Xanh l√° c√¢y
                default: return '';        // Kh√¥ng c√≥ m√†u
            }
        }

        // H√†m chuy·ªÉn chu·ªói ng√†y th√†nh ƒë·ªëi t∆∞·ª£ng ng√†y
        function parseDate(dateString) {
            const [day, month, year] = dateString.split('/').map(Number);
            return { day, month, year };
        }

        // H√†m chuy·ªÉn ƒë·ªïi ng√†y d∆∞∆°ng l·ªãch sang ng√†y √¢m l·ªãch
        function convertToLunarDate({ day, month, year }) {
            const lunarDate = getLunarDate(day, month, year);
            return lunarDate ? { day: lunarDate.day, month: lunarDate.month, year: lunarDate.year } : { day: '', month: '' };
        }

        // H√†m l·∫•y th√¥ng tin ng√†y l·ªÖ t·ª´ danh s√°ch feasts
        function getFeastForDay(solarDate, feasts) {
            for (let feast of feasts) {
                if (feast.date && solarDate.getDate() === feast.date.getDate() &&
                    solarDate.getMonth() === feast.date.getMonth() &&
                    solarDate.getFullYear() === feast.date.getFullYear()) {
                    return feast;
                }
            }
            return null;
        }
        function getSecondFeastsForDate(date, secondFeasts) {
            for (let secondFeast of secondFeasts) {
                if (secondFeast.date &&
                    date.getDate() === secondFeast.date.getDate() &&
                    date.getMonth() === secondFeast.date.getMonth() &&
                    date.getFullYear() === secondFeast.date.getFullYear()) {
                    return secondFeast; // Tr·∫£ v·ªÅ l·ªÖ v·ªçng n·∫øu ng√†y kh·ªõp
                }
            }
            return null; // Tr·∫£ v·ªÅ null n·∫øu kh√¥ng c√≥ l·ªÖ v·ªçng
        }

                // H√†m c·∫≠p nh·∫≠t th√¥ng tin ng√†y th√°ng v√† t√™n l·ªÖ trong modal
            function updateModalTitle(date, feasts) {
                const day = date.getDate();
                const month = date.getMonth() + 1; // Th√°ng trong JavaScript b·∫Øt ƒë·∫ßu t·ª´ 0
                const year = date.getFullYear();

                // L·∫•y t√™n l·ªÖ t·ª´ danh s√°ch feasts cho ng√†y hi·ªán t·∫°i
                const feast = getFeastForDay(date, feasts);
                const feastName = feast ? feast.name : 'Kh√¥ng c√≥ l·ªÖ ƒë·∫∑c bi·ªát';

                // C·∫≠p nh·∫≠t th·∫ª <h3> trong modal
                document.querySelector("#readingModal h3").textContent = `B√†i ƒê·ªçc Ng√†y: ${day}/${month}/${year} - ${feastName}`;
            }
            function updateModalTitle1(date, secondFeasts, feasts) {
                    const day = date.getDate();
                    const month = date.getMonth() + 1; // Th√°ng trong JavaScript b·∫Øt ƒë·∫ßu t·ª´ 0
                    const year = date.getFullYear();

                    // L·∫•y c√°c l·ªÖ v·ªçng
                    const secondFeast1 = calculateSecondFeasts(year); 

                    // L·∫•y l·ªÖ v·ªçng t·ª´ danh s√°ch secondFeasts cho ng√†y hi·ªán t·∫°i
                    const secondFeast = getSecondFeastsForDate(date, secondFeast1);
                    // N·∫øu c√≥ l·ªÖ v·ªçng, l·∫•y t√™n l·ªÖ v·ªçng; n·∫øu kh√¥ng, hi·ªÉn th·ªã l·ªÖ ch√≠nh
                    let feastName;
                    if (secondFeast && secondFeast.name) {
                        feastName = secondFeast.name; // L·∫•y t√™n l·ªÖ v·ªçng
                    } else {
                        const feasts = calculateFeasts(year);
                        const feast = getFeastForDay(date, feasts); // L·∫•y l·ªÖ ch√≠nh n·∫øu kh√¥ng c√≥ l·ªÖ v·ªçng
                        feastName = feast ? feast.name : 'Kh√¥ng c√≥ l·ªÖ ƒë·∫∑c bi·ªát';
                        feastName = feastName.replace(/Th·ª© Hai\.|Th·ª© Ba\.|Th·ª© T∆∞\.|Th·ª© NƒÉm\.|Th·ª© S√°u\.|Th·ª© B·∫£y\./g, '').trim();

                        // Th√™m chu·ªói "V·ªÅ v·ªã th√°nh" v√†o tr∆∞·ªõc t√™n l·ªÖ ch√≠nh
                        feastName = "L·ªÖ " +feastName ;


                    }

                    // C·∫≠p nh·∫≠t th·∫ª <h3> trong modal
                    document.querySelector("#readingModal h3").textContent = `B√†i ƒê·ªçc Ng√†y: ${day}/${month}/${year} - ${feastName}`;
                }

                const MIN_FONT_SIZE = 16; // K√≠ch th∆∞·ªõc ph√¥ng ch·ªØ t·ªëi thi·ªÉu
const MAX_FONT_SIZE = 36; // K√≠ch th∆∞·ªõc ph√¥ng ch·ªØ t·ªëi ƒëa

function setFontSize(size) {
    var content = document.getElementById('readingContent');
    content.style.fontSize = size + 'px';
    localStorage.setItem('readingFontSize', size); // L∆∞u k√≠ch th∆∞·ªõc v√†o localStorage
}

function increaseFontSize() {
    var content = document.getElementById('readingContent');
    if (content) {
        var currentSize = parseFloat(window.getComputedStyle(content).fontSize);
        var newSize = currentSize + 2;
        if (newSize <= MAX_FONT_SIZE) {
            setFontSize(newSize);
        }
    } else {
        console.error("Kh√¥ng t√¨m th·∫•y ph·∫ßn t·ª≠ readingContent.");
    }
}

function decreaseFontSize() {
    var content = document.getElementById('readingContent');
    if (content) {
        var currentSize = parseFloat(window.getComputedStyle(content).fontSize);
        var newSize = currentSize - 2;
        if (newSize >= MIN_FONT_SIZE) {
            setFontSize(newSize);
        }
    } else {
        console.error("Kh√¥ng t√¨m th·∫•y ph·∫ßn t·ª≠ readingContent.");
    }
}

// Kh√¥i ph·ª•c k√≠ch th∆∞·ªõc ph√¥ng ch·ªØ khi trang ƒë∆∞·ª£c t·∫£i
document.addEventListener('DOMContentLoaded', function() {
    var savedSize = localStorage.getItem('readingFontSize');
    if (savedSize) {
        setFontSize(parseFloat(savedSize));
    }
});

// H√†m l·∫•y t√™n ng√†y trong tu·∫ßn b·∫±ng ti·∫øng Vi·ªát
function getDayOfWeekInVietnamese(date) {
    const days = [
        'CH√öA NH·∫¨T', 'Th·ª© Hai', 'Th·ª© Ba', 'Th·ª© T∆∞',
        'Th·ª© NƒÉm', 'Th·ª© S√°u', 'Th·ª© B·∫£y'
    ];
    return days[date.getDay()];
}

// H√†m ki·ªÉm tra Th·ª© NƒÉm, Th·ª© S√°u, Th·ª© B·∫£y ƒë·∫ßu th√°ng
function isFirstThursdayFridaySaturdayOfMonth(date) {
    const dayOfWeek = date.getDay(); // L·∫•y th·ª© trong tu·∫ßn (0-6)
    const dayOfMonth = date.getDate(); // L·∫•y ng√†y trong th√°ng (1-31)

    // Ki·ªÉm tra n·∫øu l√† Th·ª© NƒÉm, Th·ª© S√°u, Th·ª© B·∫£y v√† n·∫±m trong 7 ng√†y ƒë·∫ßu th√°ng
    return (dayOfWeek === 4 || dayOfWeek === 5 || dayOfWeek === 6) && dayOfMonth <= 7;
}

// H√†m c·∫≠p nh·∫≠t n·ªôi dung v·ªõi t√™n ng√†y, ƒë·∫£m b·∫£o kh√¥ng b·ªã l·∫∑p
// H√†m c·∫≠p nh·∫≠t n·ªôi dung v·ªõi x·ª≠ l√Ω cho Th·ª© NƒÉm, Th·ª© S√°u, Th·ª© B·∫£y ƒë·∫ßu th√°ng v√† CH√öA NH·∫¨T
function updateFeastAndReadingContent(date, feastAndReadingContent, options = {}) {
    let dayName = getDayOfWeekInVietnamese(date);
    let firstOfMonthName = `${dayName} ƒë·∫ßu th√°ng`;

    // Ki·ªÉm tra v√† x·ª≠ l√Ω cho Th·ª© NƒÉm, Th·ª© S√°u, Th·ª© B·∫£y ƒë·∫ßu th√°ng
    if (isFirstThursdayFridaySaturdayOfMonth(date)) {
        const regexReplace = new RegExp(`\\b${dayName}\\b`, 'gi'); // T√¨m "Th·ª© NƒÉm", "Th·ª© S√°u", "Th·ª© B·∫£y"

        // N·∫øu t√¨m th·∫•y "Th·ª© NƒÉm/S√°u/B·∫£y", thay th·∫ø b·∫±ng phi√™n b·∫£n "ƒë·∫ßu th√°ng"
        if (regexReplace.test(feastAndReadingContent)) {
            feastAndReadingContent = feastAndReadingContent.replace(regexReplace, `<b>${firstOfMonthName}</b>`);
            dayName = ''; // Sau khi thay th·∫ø, kh√¥ng c·∫ßn th√™m l·∫°i
        } else {
            // N·∫øu ch∆∞a c√≥, th√™m "Th·ª© NƒÉm/S√°u/B·∫£y ƒë·∫ßu th√°ng"
            dayName = `<b>${firstOfMonthName}</b>`;
        }
    }

    // Ki·ªÉm tra v√† x·ª≠ l√Ω CH√öA NH·∫¨T
    if (dayName === 'CH√öA NH·∫¨T') {
        const regexCheckSunday = new RegExp(`\\bCH√öA NH·∫¨T\\b`, 'i');
        if (!regexCheckSunday.test(feastAndReadingContent)) {
            dayName = `<b>${dayName}</b>`;
        } else {
            dayName = ''; // N·∫øu ƒë√£ c√≥, b·ªè qua ƒë·ªÉ tr√°nh l·∫∑p
        }
    }

    // √Åp d·ª•ng c√°c t√πy ch·ªçn ƒë·ªãnh d·∫°ng t·ª´ options
    const { uppercase = false, italic = false } = options;

    // Chuy·ªÉn th√†nh ch·ªØ hoa n·∫øu c·∫ßn
    if (uppercase) {
        dayName = dayName.toUpperCase();
    }

    // Th√™m th·∫ª in nghi√™ng n·∫øu c·∫ßn
    if (italic) {
        dayName = `<i>${dayName}</i>`;
    }

   // Ki·ªÉm tra n·∫øu t√™n ng√†y ƒë√£ c√≥ ·ªü ƒë·∫ßu chu·ªói, kh√¥ng th√™m l·∫°i
   const regexCheckAtStart = new RegExp(`^${dayName}`, 'i'); // Ki·ªÉm tra xem ƒë√£ c√≥ ·ªü ƒë·∫ßu chu·ªói ch∆∞a
    if (dayName && !regexCheckAtStart.test(feastAndReadingContent)) {
        feastAndReadingContent = `${dayName}, ${feastAndReadingContent}`;
    }


    return feastAndReadingContent;
}


// H√†m b√¥i ƒë·∫≠m n·ªôi dung (Bold)
function boldText() {
    // L·∫•y ph·∫ßn n·ªôi dung c·ªßa modal
    var content = document.getElementById('readingContent');
    
    // Ki·ªÉm tra n·∫øu n·ªôi dung ƒë√£ ƒë∆∞·ª£c b√¥i ƒë·∫≠m hay ch∆∞a
    if (content.style.fontWeight === 'bold') {
        content.style.fontWeight = 'normal'; // N·∫øu ƒë√£ ƒë·∫≠m th√¨ chuy·ªÉn v·ªÅ b√¨nh th∆∞·ªùng
    } else {
        content.style.fontWeight = 'bold'; // N·∫øu ch∆∞a ƒë·∫≠m th√¨ b√¥i ƒë·∫≠m
    }
}
            const liturgicalYears = ['A', 'B', 'C'];

            // H√†m t√≠nh to√°n v√† tr·∫£ v·ªÅ chu k·ª≥ nƒÉm ph·ª•ng v·ª• (A, B ho·∫∑c C)
            function getLiturgicalYear(year) {
                const startYear = 2020; // NƒÉm b·∫Øt ƒë·∫ßu cho chu k·ª≥
                const cycleLength = 3;  // Chu k·ª≥ l·∫∑p l·∫°i m·ªói 3 nƒÉm
                const yearOffset = year - startYear;
                const cycle = (yearOffset % cycleLength + cycleLength) % cycleLength;
                return liturgicalYears[cycle];
            }

</script>

</body>
</html>
